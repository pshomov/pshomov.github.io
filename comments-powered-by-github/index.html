<!doctype html>
<!--[if lt IE 7]>
    <html class="no-js lt-ie9 lt-ie8 lt-ie7">
    <![endif]-->
    <!--[if IE 7]>
        <html class="no-js lt-ie9 lt-ie8">
        <![endif]-->
        <!--[if IE 8]>
            <html class="no-js lt-ie9">
            <![endif]-->
            <!--[if gt IE 8]>
                <!-->
                <html class="no-js">
                <!--<![endif]-->
                <meta charset="utf-8">
                <meta http-equiv="X-UA-Compatible" content="IE=edge">
                <title></title>
                <meta name="description" content="This is Petar's blog about programming and design">
                <link rel="me" type="text/html" href="http://twitter.com/pshomov">                    
                <link rel='alternate' type='application/atom+xml' title='Atom feed' href='https://pshomov.github.io/atom.xml'>
                <link rel='alternate' type='application/rss+xml' title='RSS feed' href='https://pshomov.github.io/rss.xml'>
                <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=yes" />
                <!-- Place favicon.ico and apple-touch-icon.png in the root directory -->

                <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">
                <link href="https://afeld.github.io/emoji-css/emoji.css" rel="stylesheet">
                <link rel="stylesheet" href="/styles/vendor.ebca39d7.css">

                <link rel="stylesheet" href="/styles/main.dcdf46b1.css">
                
                <script src="https://rawgit.com/natevw/fermata/master/fermata.js"></script>                
                <script src="/js/vendor.28bec23a.js"></script>
                
                </head>
                
                <body>
                    <!--[if lt IE 7]>
                        <p class="browsehappy">You are using an
                            <strong>outdated</strong>browser. Please
                            <a href="http://browsehappy.com/">upgrade
    your browser</a>to improve your experience.</p>
                    <![endif]-->
                    <!--[if lt IE 9]>
                        <script src="bower_components/es5-shim/es5-shim.js"></script>
                        <script src="bower_components/json3/lib/json3.min.js"></script>
                    <![endif]-->
                    <!-- Add your site or application content here -->
                    <div id="container">
                        <div class="aboutme my_name_is">
                            <div class="picture-of-me block_center"></div>
                            <h4 class="my_name_is">
                                <a href="/introduction">My name is Petar</a>
                            </h4>
                            <h6>This is where I write about the things I find interesting</h6>
                            <div class="hcenter">
                                <span>                                    
                                    <a href="http://github.com/pshomov"><i class="fa fa-github fa-3x badge"></i></a></a>
                                    <a href="http://twitter.com/pshomov"><i class="fa fa-twitter fa-3x badge"></i></a>
                                </span>
                            </div>
                        </div>
                        <div class="content">
  <h1 href="top">Comments powered by GitHub</h1>
  <time>2015-06-08</time>
  <p>Maybe it&#39;s a bit too early to start meta-posting but I am starting to doubt the decisions I took regarding this so may be if  I go through the process of it I might feel a bit better.</p>
<p>This blog is hosted on GitHub pages. I am not entirely sure why GitHub has this service but it is very cool for us who use it. The deployment model is awesome (git push on a branch and you are done), it is free and hopefully with good CDN. That last part I will try to measure soon-ish. One important limitation - it is static pages only. Which calls for interesting combinations of static site generators and JavaScript.</p>
<p>GitHub does not provide any comment system as such, so the blogging story is somewhat incomplete. Which once again makes for a good challenge. Setting up a database and using it for comments is out of the question for me - have to host it somewhere, setting up all the processes around the management of comments - posting comments, reviewing, e-mail notifications, responding by e-mail, etc. It basically would erase the simplicity GitHub pages gives me.</p>
<p>There is <a href="https://disqus.com">Disqus</a>, they host and take care of all those things but in return you pay with your visitors/readers privacy. At a glance it looks like the their JavaScript API is fine so using their services is feasable but probably would have lost some level of customization. All in all not a bad option just feeling uneasy since it is not quite clear what kind of deal am I getting. </p>
<p>At this point I get this idea that it would be really awesome if I can somehow get the GitHub issue discussion page and embed it into my blog. I checked out the GitHub issues API - looked good; I googled around and found this <a href="http://ivanzuzak.info/2011/02/18/github-hosted-comments-for-github-hosted-blogs.html">post by Ivan Zuzak</a> essentially implementing the same idea. I stole a whole lot of code from that post but I need a few more things to make it really work well.</p>
<p>So what are the pros and cons with the GitHub-issue-as-a-backend:</p>
<p><strong>Pros:</strong></p>
<ul>
<li>Open API to access the comments, accessible by anyone, which is right - I do not own anyone&#39;s comments</li>
<li>GitHub handles sending email notifications as well as answering to comments by email</li>
<li>Full control over the HTML/CSS of the comments section</li>
<li>Trustworthy (so far) keeper of the data - GitHub</li>
</ul>
<p><strong>Cons:</strong></p>
<ul>
<li>commenters do need a GitHub account</li>
</ul>
<p>  I believe my current and potential readers are the kind of people who do have a GitHub account so hopefully this one drawback does not matter, but if you would like to comment and don&#39;t have an account please tweet at <a href="https://twitter.com/pshomov">me</a> and I would proxy on your behalf.</p>
<p>  I think I feel better now ;-)</p>

  
  <div class="comments-title" href="comments">Comments (<a href="/comments-powered-by-github/">powered by GitHub issues</a>):</div>    
  <div id="comments" class="comments">
    <div class="hcenter spinner">
    </div>
  </div>
  <div class="hcenter comments__post"><a class="button" href="https://github.com/pshomov/pshomov.github.io/issues/2">Post your comment&nbsp;<i class="fa fa-github"></i></a></div>
  <script>
    function formatCommentTimestamp(timestamp) {
      return timestamp.toLocaleString();
    }
    function loadComments(data) {
      var comments = "";
      for (var i=0; i<data.length; i++) {
        var cuser = data[i].user.login;
        var cuserlink = "https://www.github.com/" + data[i].user.login;
        var clink = "https://github.com/pshomov/pshomov.github.io/issues/2#issuecomment-" + data[i].url.substring(data[i].url.lastIndexOf("/")+1);
       var cbody = data[i].body;
       var cavatarlink = data[i].user.avatar_url;
       var cdate = formatCommentTimestamp(new Date(data[i].created_at));
       cbody = cbody.replace(/:wink:/gmi, '<i class="em em-wink"></i>');
       comments += "<div class='comment'>"+'<img src="' + cavatarlink + '" class="avatar">'+"<div class='comment__info'>"+"<div class='comment__header'><a class='comment__user' href=\""+ cuserlink + "\">" + cuser + "</a>" + "<a class='comment__date' href=\"" + clink + "\">" + cdate + "</a></div><div class='comment__body'>" + marked(cbody) + "</div></div></div>";
     }
     if (comments == ""){
       comments = '<div class="hcenter">No comments have been posted yet, wanna go first? <i class="fa fa-hand-o-down"></i></div>';
     }
     document.getElementById("comments").innerHTML = comments;
    }
    var site = fermata.json('https://api.github.com');
    
    site('repos','pshomov', 'pshomov.github.io','issues','2', 'comments').get(function (err, data, headers){
      if (err == null){
       loadComments(data); 
      }
    });
  </script>  
  
</div>
                        <!-- <div class="links">links</div> --></div>
                    <!-- Google Analytics: change UA-XXXXX-X to be your site's ID -->
                    <script>
                        (function(i, s, o, g, r, a, m) {
                            i['GoogleAnalyticsObject'] = r;
                            i[r] = i[r] || function() {
                                (i[r].q = i[r].q || []).push(arguments)
                            }, i[r].l = 1 * new Date();
                            a = s.createElement(o),
                            m = s.getElementsByTagName(o)[0];
                            a.async = 1;
                            a.src = g;
                            m.parentNode.insertBefore(a, m)
                        })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');
                    
                        ga('create', 'UA-50877599-1', 'pshomov.github.io');
                        ga('send', 'pageview');
                    </script>
                </body>
                
                </html>